<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Daily Routines</title>
<meta name="description" content="Quick morning circuit, night strength, and the collarbone/scapula reset." />
<meta name="theme-color" content="#0f172a" />
<link rel="manifest" href="manifest.json" />
<link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png" />
<link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png" />
<link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png" />
<style>
  :root {
    --bg:#0f172a;        /* slate-900 */
    --card:#111827;      /* gray-900 */
    --muted:#94a3b8;     /* slate-400 */
    --text:#e5e7eb;      /* gray-200 */
    --accent:#22c55e;    /* green-500 */
    --accent2:#60a5fa;   /* blue-400 */
    --warn:#f59e0b;      /* amber-500 */
    --danger:#ef4444;    /* red-500 */
    --soft:#1f2937;      /* gray-800 */
  }
  *{box-sizing:border-box}
  body{
    margin:0; background:var(--bg); color:var(--text);
    font-family: system-ui, -apple-system, Segoe UI, Roboto, Inter, Arial, sans-serif;
    -webkit-font-smoothing: antialiased; line-height:1.35;
  }
  .wrap { max-width: 720px; margin: 0 auto; padding: 16px; }
  header { text-align:center; margin: 8px 0 16px; }
  h1 { font-size: 1.5rem; margin: 0 0 4px; }
  .sub { color: var(--muted); font-size: .95rem; }
  .grid {
    display:grid; gap:12px; grid-template-columns: 1fr;
  }
  @media (min-width:560px){
    .grid{ grid-template-columns: 1fr 1fr; }
  }
  .btn {
    background: linear-gradient(180deg, #1f2937, #0b1220);
    border: 1px solid #23304a;
    color: var(--text);
    padding: 16px;
    border-radius: 16px;
    text-align: center;
    font-weight: 600;
    box-shadow: 0 6px 16px rgba(0,0,0,.25);
    user-select:none;
  }
  .btn:active { transform: scale(.99); }
  .btn--accent { border-color:#1a3d2d; background: linear-gradient(180deg, #123524, #0b2419); }
  .btn--blue   { border-color:#1d2e4a; background: linear-gradient(180deg, #0e223f, #0a1627); }
  .btn--gold   { border-color:#4a3a1d; background: linear-gradient(180deg, #2f2410, #201807); }
  .card {
    background: var(--card);
    border: 1px solid #1f2a44;
    border-radius: 18px;
    padding: 16px;
    box-shadow: 0 8px 24px rgba(0,0,0,.35);
  }
  .row { display:flex; gap:12px; align-items: center; }
  .row.wrap { flex-wrap:wrap; }
  .title { font-size:1.15rem; font-weight:700; }
  .muted { color:var(--muted); font-size:.95rem; }
  .big { font-size: 2.25rem; font-weight:800; letter-spacing:.5px; }
  .timer { font-variant-numeric: tabular-nums; }
  .pill {
    display:inline-block; padding:6px 10px; border-radius:999px;
    background:#0b1220; border:1px solid #22304d; color:var(--muted); font-size:.8rem;
  }
  .controls { display:flex; gap:10px; margin-top:12px; }
  .control {
    flex:1; text-align:center; padding:12px 10px; border-radius:12px;
    background:var(--soft); border:1px solid #2a3a5f; font-weight:700;
  }
  .control--go { background:#0f2c1f; border-color:#1a3d2d; color:#b9f6cf; }
  .control--next { background:#10243a; border-color:#1d2e4a; color:#b9d7ff; }
  .control--stop { background:#3a1010; border-color:#4a1d1d; color:#ffd1d1; }
  .note { margin-top:8px; color:var(--muted); font-size:.9rem; }
  .footer { margin-top:14px; font-size:.85rem; color:var(--muted); text-align:center; }
  .back { margin-bottom:12px; display:inline-block; color:#b9d7ff; text-decoration:none; }
  .list { margin: 8px 0 0 18px; }
  .spacer { height:6px; }
</style>
</head>
<body>
<div class="wrap">
  <header>
    <h1>Daily Routines</h1>
    <div class="sub">Quick morning circuit, night strength, and the collarbone/scapula reset.</div>
  </header>

  <!-- HOME -->
  <div id="screen-home">
    <div class="grid">
      <div class="btn btn--accent" data-open="morning">
        üåÖ Morning Routine
        <div class="muted">~5‚Äì7 minutes</div>
      </div>
      <div class="btn btn--blue" data-open="night">
        üåô Night Strength
        <div class="muted">Pull-ups ‚Ä¢ Dips ‚Ä¢ Split Squats ‚Ä¢ Plank ‚Ä¢ 10-min Run</div>
      </div>
      <div class="btn btn--gold" data-open="reset">
        ü¶¥ Collarbone / Scapula Reset
        <div class="muted">Un-shrug ‚Ä¢ Serratus Reach ‚Ä¢ Neck Glide</div>
      </div>
    </div>

    <div class="card" style="margin-top:16px">
      <div class="title">How it works</div>
      <div class="muted">
        ‚Ä¢ Reps items: tap <b>Done</b> to advance. <br/>
        ‚Ä¢ Timed items: tap <b>Start</b> ‚Üí 5-sec beeped countdown ‚Üí timer runs. <br/>
        ‚Ä¢ Tap <b>Stop</b> anytime. Sound starts after your first tap.
      </div>
    </div>
    <div class="footer">Built for quick use on your phone. No sign-in, no tracking.</div>
  </div>

  <!-- ROUTINE SCREEN -->
  <div id="screen-routine" style="display:none">
    <a href="#" class="back" id="backBtn">‚Üê Back</a>
    <div class="card">
      <div class="row wrap">
        <div class="title" id="routineTitle">Routine</div>
        <span class="pill" id="progressPill">1 / N</span>
      </div>
      <div class="spacer"></div>
      <div class="muted" id="exerciseSubtitle"></div>
      <div class="big timer" id="primaryReadout">00:00</div>
      <div class="note" id="exerciseNote"></div>

      <div class="controls">
        <button class="control control--go" id="startBtn">Start</button>
        <button class="control control--next" id="doneBtn">Done</button>
        <button class="control control--stop" id="stopBtn">Stop</button>
      </div>
      <div class="note" id="hint"></div>
    </div>

    <div class="card" style="margin-top:12px">
      <div class="title">Exercises</div>
      <ol class="list" id="exerciseList"></ol>
    </div>
  </div>
</div>

<script>
/* ------------------ Sound (beeps) ------------------ */
let audioCtx;
function initAudio(){
  if(!audioCtx){ audioCtx = new (window.AudioContext || window.webkitAudioContext)(); }
}
function beep(freq=880, dur=120, vol=0.2){
  if(!audioCtx) return;
  const o = audioCtx.createOscillator();
  const g = audioCtx.createGain();
  o.type = 'sine';
  o.frequency.value = freq;
  g.gain.value = vol;
  o.connect(g).connect(audioCtx.destination);
  o.start();
  setTimeout(()=>o.stop(), dur);
}

/* ------------------ Data ------------------ */
const ROUTINES = {
  morning: {
    title: "üåÖ Morning Routine",
    items: [
      {name:"Push-ups", type:"reps", reps:"15‚Äì25", note:"Elbows ~45¬∞, ribs in, smooth."},
      {name:"Bodyweight Squats", type:"reps", reps:"15‚Äì20", note:"Chest up, sit hips back."},
      {name:"Plank", type:"time", seconds:40, note:"Shoulders over elbows; glutes on."},
      {name:"Superman Hold", type:"time", seconds:20, note:"Lift gently; no low-back pinch."},
      {name:"Mountain Climbers", type:"time", seconds:30, note:"Rhythmical; keep core tight."},
    ]
  },
  night: {
    title: "üåô Night Strength",
    items: [
      {name:"Pull-ups (pick grip)", type:"reps", reps:"3 √ó 8‚Äì12", note:"Overhand ‚Üí Underhand ‚Üí Neutral (weekly)."},
      {name:"Tricep Dips", type:"reps", reps:"3 √ó 8‚Äì12", note:"Elbows close; stop if front-shoulder pinch."},
      {name:"Bulgarian Split Squats", type:"reps", reps:"3 √ó 8‚Äì10 / leg", note:"Knee tracks over toes; stay tall."},
      {name:"Plank", type:"time", seconds:40, note:"Optional add side plank on last 10s."},
      {name:"Run", type:"time", seconds:600, note:"10 minutes easy; nasal breathing if possible."}
    ]
  },
  reset: {
    title: "ü¶¥ Collarbone / Scapula Reset",
    items: [
      {name:"Un-shrug Reset", type:"reps", reps:"10", note:"Inhale shrug; exhale drop. Collarbones wide."},
      {name:"Seated Serratus Reach", type:"time", seconds:20, note:"2-sec reach / relax cycles for ~20s."},
      {name:"Neck Glide + Chin Nod", type:"reps", reps:"5", note:"Glide head back, tiny nod down."}
    ]
  }
};

/* ------------------ State & Elements ------------------ */
const screenHome = document.getElementById('screen-home');
const screenRoutine = document.getElementById('screen-routine');
const routineTitle = document.getElementById('routineTitle');
const exerciseSubtitle = document.getElementById('exerciseSubtitle');
const primaryReadout = document.getElementById('primaryReadout');
const exerciseNote = document.getElementById('exerciseNote');
const progressPill = document.getElementById('progressPill');
const exerciseList = document.getElementById('exerciseList');
const hint = document.getElementById('hint');

const startBtn = document.getElementById('startBtn');
const doneBtn  = document.getElementById('doneBtn');
const stopBtn  = document.getElementById('stopBtn');
const backBtn  = document.getElementById('backBtn');

let currentRoutine = null;
let idx = 0;
let timerId = null;
let countdownId = null;
let remaining = 0;
let inCountdown = false;

function showHome(){
  stopAllTimers();
  screenRoutine.style.display = 'none';
  screenHome.style.display = 'block';
}

function showRoutine(key){
  currentRoutine = JSON.parse(JSON.stringify(ROUTINES[key]));
  idx = 0;
  screenHome.style.display = 'none';
  screenRoutine.style.display = 'block';
  routineTitle.textContent = currentRoutine.title;
  renderExerciseList();
  loadExercise();
}

function renderExerciseList(){
  exerciseList.innerHTML = '';
  currentRoutine.items.forEach((it, i)=>{
    const li = document.createElement('li');
    li.textContent = `${it.name} ‚Äî ${it.type==='time' ? formatSecs(it.seconds) : (it.reps+' reps')}`;
    li.style.color = i===idx ? '#b9d7ff' : 'var(--muted)';
    exerciseList.appendChild(li);
  });
}

function loadExercise(){
  stopAllTimers();
  const it = currentRoutine.items[idx];
  progressPill.textContent = `${idx+1} / ${currentRoutine.items.length}`;
  exerciseSubtitle.textContent = it.name;
  exerciseNote.textContent = it.note || '';
  hint.textContent = it.type==='time'
    ? "Tap Start ‚Üí 5-sec countdown (beeps) ‚Üí timer begins."
    : "Tap Done when you‚Äôve completed the reps.";
  primaryReadout.textContent = it.type==='time'
    ? formatSecs(it.seconds)
    : (typeof it.reps==='string' ? it.reps : String(it.reps));
  renderExerciseList();
  toggleButtonsFor(it.type);
}

function toggleButtonsFor(type){
  if(type==='time'){
    startBtn.style.display='inline-block';
    stopBtn.style.display='inline-block';
    doneBtn.style.display='inline-block'; // allow skipping
    doneBtn.textContent = 'Skip';
  }else{
    startBtn.style.display='none';
    stopBtn.style.display='none';
    doneBtn.style.display='inline-block';
    doneBtn.textContent = 'Done';
  }
}

function nextExercise(){
  stopAllTimers();
  if(idx < currentRoutine.items.length-1){
    idx++;
    loadExercise();
  }else{
    // finished
    primaryReadout.textContent = "Done üéâ";
    exerciseSubtitle.textContent = "Great work!";
    hint.textContent = "Tap Back to return home.";
  }
}

function stopAllTimers(){
  if(timerId){ clearInterval(timerId); timerId = null; }
  if(countdownId){ clearInterval(countdownId); countdownId = null; }
  inCountdown = false;
}

function formatSecs(s){
  const m = Math.floor(s/60);
  const sec = s%60;
  return `${String(m).padStart(2,'0')}:${String(sec).padStart(2,'0')}`;
}

/* -------- Countdown + Timer flow (with beeps) -------- */
function startTimed(){
  initAudio(); // enable audio after first tap
  const it = currentRoutine.items[idx];
  if(!it || it.type!=='time') return;

  // 5-second pre-count
  let c = 5;
  inCountdown = true;
  primaryReadout.textContent = `Start in 00:0${c}`;
  beep(880,120,0.25);
  countdownId = setInterval(()=>{
    c--;
    if(c>0){
      primaryReadout.textContent = `Start in 00:0${c}`;
      beep(880,120,0.25);
    }else{
      clearInterval(countdownId);
      countdownId = null;
      inCountdown = false;
      beep(1200,160,0.35); // go beep
      runTimer(it.seconds);
    }
  }, 1000);
}

function runTimer(totalSeconds){
  stopBtn.disabled = false;
  let t = totalSeconds;
  remaining = t;
  primaryReadout.textContent = formatSecs(t);
  timerId = setInterval(()=>{
    t--;
    remaining = t;
    primaryReadout.textContent = formatSecs(t);
    if(t<=0){
      clearInterval(timerId);
      timerId = null;
      beep(880,140,0.25); setTimeout(()=>beep(880,140,0.25),150); setTimeout(()=>beep(1200,200,0.35),320);
      nextExercise();
    }
  }, 1000);
}

/* ------------------ Events ------------------ */
document.querySelectorAll('[data-open]').forEach(b=>{
  b.addEventListener('click', ()=> showRoutine(b.getAttribute('data-open')));
});
backBtn.addEventListener('click', (e)=>{ e.preventDefault(); showHome(); });

startBtn.addEventListener('click', ()=>{
  const it = currentRoutine.items[idx];
  if(it.type==='time' && !inCountdown && !timerId){ startTimed(); }
});

doneBtn.addEventListener('click', ()=> nextExercise());

stopBtn.addEventListener('click', ()=>{
  if(inCountdown || timerId){
    stopAllTimers();
    beep(440,120,0.2);
    hint.textContent = "Stopped. Tap Start to try again, or Skip to move on.";
  }
});
</script>
</body>
</html>
